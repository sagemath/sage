.. _section-installation:

创建 Sage 学习环境
==================

学习 Sage 要做的第一件事，就是要创建 Sage 学习环境。本章将详细介绍如何进行 Sage 学习环境的创建，但不包括从
源码编译 Sage 方面的内容，因为这对于初学者是一个比较棘手的事情，即使从源码编译也并不是一件很难的事情。

概述
----

Sage 能够在多种计算机操作系统下进行安装，如 Windows（及以前的版本还只能通过虚拟机使用）、Mac
OS 和
Linux（以 Ubuntu 为例），你甚至可以在线使用 Sage，前提是你的网速足够快。另外，相对于 Windows，在 Ubnutu 
和 Mac
OS 下进行安装时的操作更为方便，而且运行起来更加流畅，因此笔者强烈建议用户在 Ubuntu 或 Mac
OS 下学习
使用 Sage 。在讲解 Ubuntu 下的 Sage 安装时，笔者以 Ubuntu-11.10 为平台进行讲解，而非官方二进制安装包编译平
台 Ubuntu-10.04-LTS 。关于 Mac
OS 下的 Sage 安装，笔者未经实践，所以仅供参考。

Ubuntu 下创建 Sage 学习环境
---------------------------

下载二进制安装包
~~~~~~~~~~~~~~~~

到 Sage 官网的 \  `链接下载与 Ubuntu <http://www.sagemath.org/download-linux.html>`_ 系统对应的 Sage 版本，特别需要注意的是：如果你的操作系统
是32位的，那么就下载对应32位操作系统的 Sage 版本，64位亦是如此。例如，笔者使用的 Ubuntu 系统是32位的，那么我
下载的 Sage 二进制安装包的全名是这样的：\ ``sage-4.8-linux-32bit-ubuntu_10.04_lts-i686-Linux.tar.lzma`` 。

解压进行安装
~~~~~~~~~~~~

可先将下载来的 Sage 二进制安装包移动到用户主文件夹下，然后将其解压至此。解压的方法有两种：一是，单击 Sage 二
进制安装包，点击鼠标右键，选择“将文件解压至此”；二是，在终端输入：\ ``tar --lzma -xvf filename`` ，其中的
``filename`` 需用 Sage 二进制安装包的全名替换掉。如果你想从键盘输入较少的字符，或是怕输入错误字符，那么你
可以将 Sage 二进制安装包文件名改为：\ ``sage-4.8.tar.lzma`` 后，再输入命令，或者干脆复制粘贴文件名。

运行 Sage
~~~~~~~~~

| 不管你用那种方式进行解压，你都将得到一个名为：\ ``sage-4.8-linux-32bit-ubuntu_``
| ``10.04_lts-i686-Linux`` 的文件夹。
| 此时，我们已经可以通过终端运行 Sage 了。但为了方便，此处将解压得到的文件夹名更改为：\ ``sage-4.8`` 。

打开终端（Ubuntu-11.10 下的快捷键为：\ ``Alt+Shift+T``\ ），输入：\ ``cd sage-4.8`` 以进入解压得到的文件夹。然
后再输入：\ ``./sage`` ，等待一小段时间（第一次运行需要重新生成文件），就可以进入 Sage 命令行模式，在该模式
下即可运行 Sage 程序。此时，在命令行中输入：\ ``notebook（）``\ ，即可自动进入 Sage 笔记本模式。

多用户模式
~~~~~~~~~~

虽然通过以上过程，我们已经可以运行 Sage 了，但这只局限于本用户使用。并且，我们不能通过终端一步进入 Sage ，这显得
有点不方便。所以，我们可以将 Sage 设置成多用户模式，这个过程需要以超级用户进行操作。

首先我们将 \ ``sage-4.8`` 文件夹移至 ``/opt`` 目录下，然后在 ``/usr/bin`` 下创建指向 Sage 实际所在位置的符
号链接。打开终端输入：\ ``sudo mv sage-4.8 /opt`` （注意：斜杠前面有一个空格），系统提示输入超级用户密码，输入即
可，大约20秒后，\ ``sage-4.8`` 文件夹将被移至 ``/opt`` 目录下。当你看到主目录下的 ``sage-4.8`` 文件夹消失了，
就说明此过程已完成。然后，在终端输入：\ ``cd /usr/bin`` （注意：斜杠前面有一个空格）以进入 ``/usr/bin`` 目录，
再输入 \ ``sudo ln -s /opt/sage-4.8/sage sage`` ，并在提示后输入超级用户密码完成设置。以后，用户就可以在终端直接
键入：\ ``sage`` 进入 Sage 命令行模式了。但需要提醒的是：如果你想其它用户使用 Sage ，那么第一次运行 Sage 的用户必
须是系统管理员（创建符号链接的用户），因为其它用户没有配置文件的权限。

Mac OS 下创建 Sage 学习环境
---------------------------

下载二进制安装包
~~~~~~~~~~~~~~~~

到 Sage 官网的 \ `链接下载与 Mac OS <http://www.sagemath.org/download-mac.html>`_
对应的 Sage 版本，这里仍然需要注意的是：如果你的操作
系统是32位的，那么就下载对应32位操作系统的 Sage 版本，64位亦是如此。而且，对于 Mac
OS ，你还得注意你所使
用的系统版本号需要与你所下载的二进制安装包标明的一致。如果你的系统是的 Mac
OS X 10.5（32-bit Intel） ，
那么你下载的 Sage 二进制安装包的全名应该是这样的：\ ``sage-4.8-osx-32bit-10.5-i386-darwin-app.dmg`` 。

进行安装
~~~~~~~~

双击下载得到的 .dmg 磁盘镜像文件进行加载，把磁盘镜像里的 Sage 文件夹移动到你想要放置的地方（比如：Apps 文件夹）。
如果复制过程发生错误，那么你得通过命令行来完成这步操作。打开终端，输入：\ ``cd /Applications`` ，进入应用软件文件夹。
接着输入：\ ``cp -R -P /Volumes/filename /sage`` ，其中的 ``filename`` 需用 Sage 二进制安装包的全名替换掉。当复制
过程完成后，右击磁盘镜像文件的图标，选择 \ ``Eject`` 卸载该镜像文件。

运行 Sage
~~~~~~~~~

使用 Finder 访问上面建立的 Sage 文件夹，双击名为 \ ``Sage`` 的图标，在正常情况下会打开终端，然后运行 Sage 。如果，双击
不能成功运行的话，右击名为 \ ``Sage`` 的图标，选择 ``Open With -> Terminal.app`` ，此时应该可以在终端启动 Sage 了。

第一次启动 Sage 会等待一小段时间，当 Sage 完成新文件的生成后，就可以进入 Sage 命令行模式，在该模式下即可运行 Sage 程序。
此时，在命令行中输入：\ ``notebook（）``\ ，即可自动进入 Sage 笔记本模式。

Windows 下创建 Sage 学习环境
----------------------------

下载虚拟机文件
~~~~~~~~~~~~~~

到 Sage 官网的 \ `链接下载与 Windows <http://www.sagemath.org/download-windows.html>`_ 系统对应的 Sage 虚拟机文件，对于 ``Sage-4.8`` 版本，你下载得
到的文件全名应该是这样的：\ ``sage-4.8.ova`` 。

下载 VirtualBox 
~~~~~~~~~~~~~~~~

``VirtualBox`` 是一款非常强大并且开源的虚拟机软件，Sage 通过它向外部建立了客户端口，以实现在 Windows 上使用 ``notebook``\ 。
不过，根据 Sage 的开发跟踪，\ ``Sage-5.0`` 将通过 Cygwin 实现直接在 Windows 上进行安装，这在很大程度上减轻了在 Windows 上运行 Sage 
的一些麻烦。闲话少说，访问：\ https://www.virtualbox.org/wiki/Downloads\ ，下载与你的操作系统对应的 \ ``VirtualBox`` 版本。

安装与运行 Sage
~~~~~~~~~~~~~~~

先安装\ ``VirtualBox``\ ，然后导入下载的 Sage 虚拟机文件。导入完成后，运行建立的虚拟机，即可通过外部端口（\ localhost:8000\ ）使用
 ``notebook``\ （强烈建议使用 Firefox 打开外部端口）。更加详细的安装步骤请参见：\ http://wiki.sagemath.org/SageAppliance 。
